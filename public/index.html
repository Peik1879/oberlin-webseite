<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Oberlinhaus Werkstatt Portal - Anmelden</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <a href="#main-content" class="skip-to-main">Zum Hauptinhalt springen</a>

  <header role="banner">
    <div class="container">
      <div class="header-logo">
        <div class="logo-circle">OBERLINHAUS</div>
        <div class="header-content">
          <h1>Oberlinhaus Werkstatt</h1>
          <p class="header-subtitle">Einfach. Ãœbersichtlich. Barrierefrei.</p>
        </div>
      </div>
    </div>
  </header>

  <main id="main-content">
    <div class="container">
      <div style="max-width: 500px; margin: 3rem auto;">
        
        <!-- Fehler-Meldung -->
        <div id="error-message" class="alert alert-error" style="display: none;"></div>

        <div class="card">
          <h2 style="text-align: center; margin-top: 0;">Anmelden</h2>

          <!-- PIN Login Tab -->
          <div id="login-pin-form">
            <form onsubmit="handleLoginPin(event)" novalidate>
              <div>
                <label for="username">Benutzername</label>
                  <input type="text" id="username" name="username" autofocus>
                <small style="display: block; margin-top: 4px; color: #666;">
                  z.B. max.mueller
                </small>
              </div>

              <div>
                <label for="pin">PIN-Code (4 Ziffern)</label>
                  <input type="password" id="pin" name="pin" 
                    pattern="[0-9]{4}" maxlength="4"
                    aria-describedby="pin-help">
                <small id="pin-help" style="display: block; margin-top: 4px; color: #666;">
                  Wie am Geldautomaten
                </small>
              </div>

              <button type="submit" class="btn">Anmelden</button>
            </form>

            <p style="text-align: center; margin-top: 2rem; color: #666;">
              <button type="button" onclick="switchToEmailLogin()" style="background: none; border: none; color: #b61b3e; text-decoration: underline; cursor: pointer; font-size: 0.95rem;">
                Mit Email anmelden
              </button>
            </p>
          </div>

          <!-- Email Login Tab -->
          <div id="login-email-form" style="display: none;">
            <form onsubmit="handleLoginEmail(event)" novalidate>
              <div>
                <label for="email">Email-Adresse</label>
                  <input type="email" id="email" name="email">
              </div>

              <div>
                <label for="password">Passwort</label>
                  <input type="password" id="password" name="password">
              </div>

              <button type="submit" class="btn">Anmelden</button>
            </form>

            <p style="text-align: center; margin-top: 2rem; color: #666;">
              <button type="button" onclick="switchToPinLogin()" style="background: none; border: none; color: #b61b3e; text-decoration: underline; cursor: pointer; font-size: 0.95rem;">
                Mit PIN anmelden
              </button>
            </p>
          </div>

          <!-- Demo Credentials Info -->
          <div class="alert alert-info" style="margin-top: 2rem;">
            <strong>ðŸ”“ Demo:</strong> Benutzer: <code>admin</code>, PIN: <code>0000</code>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="accessibility-footer">
    <button id="font-size-btn" aria-label="SchriftgrÃ¶ÃŸe Ã¤ndern">ðŸ”¤ A</button>
    <button id="text-to-speech-btn" aria-label="Vorlesen" aria-pressed="false">ðŸ”Š</button>
    <button id="easy-language-btn" aria-label="Leichte Sprache" aria-pressed="false">ABC</button>
  </footer>

  <script src="js/accessibility.js" type="module"></script>
  <script src="js/easy-language.js" type="module"></script>
  
  <script>
    function switchToEmailLogin() {
      document.getElementById('login-pin-form').style.display = 'none';
      document.getElementById('login-email-form').style.display = 'block';
      document.getElementById('email').focus();
    }

    function switchToPinLogin() {
      document.getElementById('login-email-form').style.display = 'none';
      document.getElementById('login-pin-form').style.display = 'block';
      document.getElementById('username').focus();
    }

    function handleLoginPin(event) {
      event.preventDefault();
      window.location.href = 'dashboard.html';
    }

    function handleLoginEmail(event) {
      event.preventDefault();
      window.location.href = 'dashboard.html';
    }

    function showError(message) {
      const errorEl = document.getElementById('error-message');
      errorEl.textContent = message;
      errorEl.style.display = 'block';
      errorEl.focus();
    }

    // Auto-Fokus Fehler Reset
    document.getElementById('username').addEventListener('focus', () => {
      document.getElementById('error-message').style.display = 'none';
    });
    document.getElementById('email').addEventListener('focus', () => {
      document.getElementById('error-message').style.display = 'none';
    });
  </script>
</body>
</html>

